<!doctype html>
<html lang="en" class="h-100">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>Prenotazione</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sticky-footer-navbar/">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <link href="sticky-footer-navbar.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <style>
        .navbar {
            color: white;
        }

        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        .container {
            padding: 2rem 0rem;
        }

        @media (min-width: 100px){
            .modal-dialog {
                max-width: 300px;
            }
            .modal-content {
                padding: 1rem;
            }
        }

        .modal-header .close {
            margin-top: -1.5rem;
        }


        .form-title {
            margin: -2rem 0rem 2rem;
        }

        .btn-round {
            border-radius: 3rem;
        }

        footer {
            background-color: #555;
            color: white;
            padding: 15px;
        }

        .costumbutt {
            width: 150px !important;
        }
    </style>



    <script>



    </script>

</head>
<body class="d-flex flex-column h-100">
    <div id="app">
        <nav class="navbar navbar-expand-lg navbar-light bg-dark">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0"></ul>
                    <!-- LOGIN E LOGOUT -->
                    {{ login }}
                    <button type="button" v-show="!autorizzazione" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Login</button>
                    <span v-show="autorizzazione">
                        <button type="button" v-on:click=getLogout('logout') id="logoutt" class="btn btn-outline-primary">Logout</button>
                    </span>


                    <!-- MENU DI LOGIN CON USER E PASS -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content text-center">
                                <!-- FORM DI UTENTE E PASSWORD -->
                                <div class="modal-body">
                                    <div class="modal-header justify-content-center">
                                        <img src="utente.png" height="50" width="50"/>
                                    </div>
                                    <form>
                                        <div class="mb-3">
                                            <p> </p>
                                            <input id="utente" type="text" class="form-control" name="utente" placeholder="Utente" required>
                                            <p> </p>
                                        </div>
                                        <div class="mb-3">
                                            <input id="password" type="password" class="form-control" name="password" placeholder="Password" required>
                                        </div>
                                        <p> </p>
                                        <button type="button" v-on:click="getInfo('login')" id="go" class="btn btn-primary" data-bs-dismiss="modal" >Login</button> <br><br>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- SIDENAV CON MAIN -->
        <div class="container-fluid">
            <div class="row">
                <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                    <!-- COMANDI UTENTI E ADMIN -->
                    <div class="position-sticky pt-3">
                        <ul class="nav flex-column">
                            <span v-show="admin">
                                <h6 class="sidebar-heading d-flex justify-content-between align-items-left px-4 mt-4 mb-1 text-muted">
                                    <span>PANNELLO ADMIN</span>
                                </h6>
                                <li class="nav-item">
                                    <p> </p>
                                    <button type="button" v-on:click="getUtente" id="getUtente" class="btn btn-outline-secondary btn-sm costumbutt">Visualizza Utenti</button>
                                    <p> </p>
                                    <button type="button" v-on:click="getPrenotazione" id="getPrenotazioni" class="btn btn-outline-secondary btn-sm costumbutt">Prenotazioni </button>
                                    <p> </p>
                                    <button type="button" v-on:click="AddDocShow" id="addDocente" class="btn btn-outline-secondary btn-sm costumbutt">Aggiungi Docente</button>
                                    <p> </p>
                                    <button type="button" v-on:click="removeDocShow" id="removeDocente" class="btn btn-outline-secondary btn-sm costumbutt">Rimuovi Docente</button>
                                    <p> </p>
                                    <button type="button" v-on:click="AddCorsoShow" id="addCorso" class="btn btn-outline-secondary btn-sm costumbutt">Aggiungi Corso</button>
                                    <p> </p>
                                    <button type="button" v-on:click="removeCorShow" id="removeCorso" class="btn btn-outline-secondary btn-sm costumbutt">Rimuovi Corso</button>
                                    <p> </p>
                                    <button type="button" v-on:click="AddMateriaShow" id="addMateria" class="btn btn-outline-secondary btn-sm costumbutt">Aggiungi Materia</button>
                                    <p> </p>
                                    <button type="button" v-on:click="removeMatShow" id="removeMateria" class="btn btn-outline-secondary btn-sm costumbutt">Rimuovi Materia</button>
                                    <p> </p>

                                    <span v-show="AddDocente">
                                        <label for="nome">INSERISCI DOCENTE</label>
                                        <p> </p>
                                        <input type="text" id="nome" name="nome" placeholder="Nome">
                                        <p> </p>
                                        <input type="text" id="cognome" name="cognome" placeholder="Cognome">
                                        <p> </p>
                                        <input type="submit" v-on:click="addDoc" id="AddDoc" name="submit" class="btn btn-success btn-sm costumbutt" value="INSERISCI DOCENTE"/>
                                        <p> </p>
                                    </span>

                                    <span v-show="AddCorso">
                                        <label for="idDocenteC">INSERISCI CORSO</label>
                                        <p> </p>
                                        <input type="text" id="idDocenteC" name="idDocenteC" placeholder="ID Docente">
                                        <p> </p>
                                        <input type="text" id="idCorso" name="idCorso" placeholder="Nome Materia">
                                        <p> </p>
                                        <input type="submit" v-on:click="addCor" id="AddCor" name="submit" class="btn btn-success btn-sm costumbutt" value="INSERISCI CORSO"/>
                                        <p> </p>
                                    </span>

                                    <span v-show="AddMateria">
                                        <label for="idMateria">INSERISCI MATERIA</label>
                                        <p> </p>
                                        <input type="text" id="idMateria" name="idMateria" placeholder="Nome Materia">
                                        <p> </p>
                                        <input type="submit" v-on:click="addMat" id="AddMat" name="submit" class="btn btn-success btn-sm costumbutt" value="INSERISCI MATERIA"/>
                                        <p> </p>
                                    </span>

                                    <span v-show="removeDoc">
                                        <label for="idDocRem">RIMUOVI DOCENTE</label>
                                        <p> </p>
                                        <input type="text" id="idDocRem" name="idDocRem" placeholder="ID Docente">
                                        <p> </p>
                                        <input type="submit"  v-on:click="remDoc" id="RemDoc" name="submit" class="btn btn-danger btn-sm costumbutt" value="RIMUOVI DOCENTE"/>
                                        <p> </p>
                                    </span>

                                    <span v-show="removeCor">
                                        <label for="idCorRem">RIMUOVI CORSO</label>
                                        <p> </p>
                                        <input type="text" id="idCorRem" name="idCorRem" placeholder="ID Corso">
                                        <p> </p>
                                        <input type="submit"  v-on:click="remCor" id="RemCor" name="submit" class="btn btn-danger btn-sm costumbutt" value="RIMUOVI CORSO"/>
                                        <p> </p>
                                    </span>

                                    <span v-show="removeMat">
                                        <label for="idCorRem">RIMUOVI MATERIA</label>
                                        <p> </p>
                                        <input type="text" id="idMatRem" name="idMatRem" placeholder="Titolo Corso">
                                        <p> </p>
                                        <input type="submit"  v-on:click="remMat" id="RemMat" name="submit" class="btn btn-danger btn-sm costumbutt" value="RIMUOVI MATERIA"/>
                                        <p> </p>
                                    </span>

                                </li>
                            </span>


                            <span v-show="utente">
                                <h6 class="sidebar-heading d-flex justify-content-between align-items-left px-4 mt-4 mb-1 text-muted">
                                    <span>PANNELLO UTENTE</span>
                                </h6>
                                <li class="nav-item">
                                    <p> </p>
                                    <button type="button" v-on:click="getMiePrenotazioni" id="getMiePrenotazioni" class="btn btn-outline-secondary btn-sm costumbutt">Prenotazioni </button>
                                     <p> </p>
                                </li>
                            </span>
                        </ul>
                    </div>
                </nav>
                <!-- MAIN CON CALENDARIO -->

                <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">



                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        Calendario Lezioni
                        <button type="button"  v-on:click="getMats" id="Matss" class="btn btn-outline-secondary btn-sm costumbutt">Visualizza Materie</button>
                        <div v-for="materia in mats">
                            <button type="button"  v-on:click="passMat(materia.titoloCorso)"  id="calendar" class="btn btn-outline-secondary btn-sm costumbutt">{{materia.titoloCorso}}</button>

                        </div>




                    </div>

                    <span v-show="showPrenotazioni">
                        <di v-for="prenotazione in prenotazioni"><p> ID Prenotazione: {{prenotazione.idPrenotazione}} ID Utente: {{prenotazione.idUtente}} ID Docente: {{prenotazione.idDocente}} ID Corso:{{prenotazione.idCorso}} Orario: {{prenotazione.orario}} Data: {{prenotazione.giorno}}</p></di>
                    </span>

                    <span v-show="showUtenti">
                        <di v-for="utente in utenti"><p>Nome: {{utente.nome}} Cognome: {{utente.cognome}} ID: {{utente.nomeUtente}} Password: {{utente.password}} Ruolo: {{utente.ruolo}}</p></di>
                    </span>

                    <span v-show="showMiePrenotazioni">
                        <di v-for="prenotazione in Mieprenotazioni"><p> ID Prenotazione: {{prenotazione.idPrenotazione}} ID Utente: {{prenotazione.idUtente}} ID Docente: {{prenotazione.idDocente}} ID Corso:{{prenotazione.idCorso}} Orario: {{prenotazione.orario}} Data: {{prenotazione.giorno}}</p></di>
                    </span>

                    <div v-for="insegnamento in calendario">
                        Docente: {{insegnamento.idDocente}}
                        Materia: {{insegnamento.idCorso}}
                        Giorno: {{insegnamento.giorno}}
                        Orario: {{insegnamento.orario}}
                        <button type="button"  v-on:click="prenota(insegnamento.giorno, insegnamento.orario, insegnamento.idDocente, insegnamento.idCorso)" class="btn btn-outline-secondary btn-sm costumbutt">PRENOTA</button>
                    </div>


                    <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>
                </main>


            </div>
        </div>
        <!-- FOOTER PER STAMPE -->

        <footer class="footer mt-auto py-3 bg-dark text-center">
            <span v-show="AddDocente">  <div id="ADDEDDOC" class="outputTextArea"></div> </span>
            {{confermaAzione}}
            {{logout}}
            <span v-show="AddCorso">  <div id="ADDEDCORSO" class="outputTextArea"></div> </span>
            <span v-show="removeDoc">  <div id="REMOVEDDOC" class="outputTextArea"></div> </span>
        </footer>
    </div>

    <script>
        var app = new Vue ({
            el: '#app',
            data: {
                login: ' ',
                logout: ' ',
                autori: 'prova',
                autorizzazione: false,
                utente: false,
                admin: false,
                AddDocente: false,
                utenti : [],
                prenotazioni : [],
                mats : [],
                calendario : [],
                AddCorso : false,
                removeDoc : false,
                showPrenotazioni : false,
                showMiePrenotazioni : false,
                showUtenti : false,
                removeCor : false,
                AddMateria : false,
                removeMat : false,
                confermaAzione : '',
                link :  '/Ripetizioni/Servlet02',
                link1 : '/Ripetizioni/ServletJSON',
                link2 : '/Ripetizioni/ServletPrenotazioni',
                link3 : '/Ripetizioni/ServletAddDoc',
                link4 : '/Ripetizioni/ServletAddCorso',
                link5 : '/Ripetizioni/ServletRemoveDoc',
                link6 : '/Ripetizioni/ServletRemoveCorso',
                link7 : '/Ripetizioni/ServletAddMat',
                link8 : '/Ripetizioni/ServletRemoveMateria',
                link9 : '/Ripetizioni/ServletJSONMateria',
                link10 : '/Ripetizioni/ServletMiePrenotazioni',
                link11 : '/Ripetizioni/ServletJSONCalendario',
                link12 : '/Ripetizioni/ServletPrenota',
                LinkLogin : '/Ripetizioni/ServletLogin',


            },

            methods:{
                getInfo:function(azione){
                    var auto = this;
                    $.post(this.LinkLogin, {utente:$("#utente").val(), password:$("#password").val(), azione:azione}, function(data) {
                        auto.login = data;
                        if (auto.login.trim() === "Admin") {
                            auto.autorizzazione = true;
                            auto.utente = true;
                            auto.admin = true;
                            auto.login = "Benvenuto/a, ";
                        } else if (auto.login.trim() === "Utente") {
                            auto.autorizzazione = true;
                            auto.utente = true;
                            auto.admin = false;
                            auto.login = "Benvenuto/a, ";
                        } else if (auto.login.trim() === "Nonloggato") {
                            auto.autorizzazione = false;
                            auto.utente = false;
                            auto.admin = false;
                            auto.login = "Utente o password errato";
                        }
                        auto.logout = " ";
                    });
                },

                getLogout: function (azione) {
                    var self = this;
                    $.post(this.LinkLogin, {azione:azione}, function(data) {
                        self.autorizzazione=false;
                        self.admin=false;
                        self.utente=false;
                        self.AddDocente = false;
                        self.AddCorso = false;
                        self.removeDoc = false;
                        self.showPrenotazioni = false;
                        self.showMiePrenotazioni = false;
                        self.showUtenti = false;
                        self.removeCor = false;
                        self.logout = "Logout effettuato con successo";
                        self.login = " ";
                    });
                },

                getUtente: function () {
                    var self = this;
                    $.get(this.link1, function (data2) {
                        self.showUtenti = true;
                        self.utenti = data2;
                    });
                },

                getPrenotazione: function () {
                    var self1 = this;
                    $.get(this.link2, function (data3) {
                        self1.showPrenotazioni = true;
                        self1.prenotazioni = data3;
                    });
                },

                addDoc: function(){
                    var doc = this;
                    $.post(this.link3, {nome:$("#nome").val(), cognome:$("#cognome").val()}, function(data) {
                        doc.confermaAzione = data;

                    });
                },

                addCor: function(){
                    var cor = this;
                    $.post(this.link4, {idDocenteC:$("#idDocenteC").val(), idCorso:$("#idCorso").val()}, function(data) {
                        cor.confermaAzione = data;

                    });
                },

                remDoc: function(){
                    var doc = this;
                    $.post(this.link5, {idInsegnamento:$("#idDocRem").val()}, function(data) {
                        doc.confermaAzione = data;

                    });
                },

                remCor: function(){
                    var Cor = this;
                    $.post(this.link6, {idCorRem:$("#idCorRem").val()}, function(data) {
                        Cor.confermaAzione = data;

                    });
                },

                addMat: function(){
                    var mat = this;
                    $.post(this.link7, {idMateria:$("#idMateria").val()}, function(data) {
                        mat.confermaAzione = data;

                    });
                },

                remMat: function(){
                    var Mat = this;
                    $.post(this.link8, {idMatRem:$("#idMatRem").val()}, function(data) {
                        Mat.confermaAzione = data;

                    });
                },

                getMats: function () {
                    var self1 = this;
                    $.get(this.link9, function (data3) {
                        self1.mats = data3;
                    });
                },

                getMiePrenotazioni: function () {
                    var self1 = this;
                    $.get(this.link10, function (data3) {
                        self1.showMiePrenotazioni = true;
                        self1.Mieprenotazioni = data3;
                    });
                },

                passMat: function (e) {
                    var self1 = this;
                    var value = e;
                    $.post(this.link11, {value:value}, function(data4) {
                        self1.calendario = data4;

                    });

                },

                prenota: function (orario, giorno, docente, corso) {
                    var self1 = this;
                    $.post(this.link12, {orario:orario, giorno:giorno, docente:docente, corso:corso}, function(data) {

                    });

                },

                AddDocShow: function () {
                    var auto = this;
                    if (auto.AddDocente === false) {
                        auto.AddDocente = true;
                    } else {
                        auto.AddDocente = false;
                    }

                },

                removeDocShow: function () {
                    var auto = this;
                    if (auto.removeDoc === false) {
                        auto.removeDoc = true;
                    } else {
                        auto.removeDoc = false;
                    }

                },

                AddCorsoShow: function () {
                    var auto = this;
                    if (auto.AddCorso === false) {
                        auto.AddCorso = true;
                    } else {
                        auto.AddCorso = false;
                    }

                },

                removeCorShow: function () {
                    var auto = this;
                    if (auto.removeCor === false) {
                        auto.removeCor = true;
                    } else {
                        auto.removeCor = false;
                    }

                },

                AddMateriaShow: function () {
                    var auto = this;
                    if (auto.AddMateria === false) {
                        auto.AddMateria = true;
                    } else {
                        auto.AddMateria = false;
                    }

                },

                removeMatShow: function () {
                    var auto = this;
                    if (auto.removeMat === false) {
                        auto.removeMat = true;
                    } else {
                        auto.removeMat = false;
                    }

                }


            }
        });
    </script>
</body>
</html>
